<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UD7-VUE3-ROUTER</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <!-- <link rel="shortcut icon" href="./img/base_logo_mobile.png" type="image/x-icon"> -->

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/vue-router@4.0.15/dist/vue-router.global.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!--CREATING A POST-->
    <div id="app"> 
        <Cabecera><!--Contents of the header --></Cabecera>

        <div id="body">
         
          
            <!--Esto es una vista a parte-->
            <!-- <router-link to="/Formulario">New Post</router-link> -->

            <router-view></router-view>
        </div>
       <New_footer id="new_ftr"> <!--Footer content--> </New_footer>
    </div>

    <script type="module">
      
        const { createApp } = Vue;
        import Cabecera from "./components/Header.js";
        import New_footer from "./components/Footer.js";
        import Posts from "./components/Posts.js";
        import Formulario from "./components/Formulario.js";
        import Lista from "./components/Lista.js";

        import router from "./components/router.js";

        var app = createApp({
            data(){
                return{
                    // form: {
                    //     title: "",
                    //     resum: "",
                    //     autor: "",
                    //     //Current date
                    //     fecha: "",
                    //     img: '',
                    //     publication_status: 'borrador',
                    // },  
                    // editing: false,
                    //Comprueba si existe datos guardados, si los hay, los lee y sino crea un array vacio.
                    // list:localStorage.getItem("posts")!=null? JSON.parse(localStorage.getItem("posts")):[],
                    list:[],
                    // editIndex: -1,       //Variable indicating that the post is being edited.
                    // msg_title: false,
                    // msg_autor: false,
                }
            },
            //Components of our website.
            components: {
                Cabecera,
                New_footer,
                Posts,
                Formulario,
                Lista,
            },
            methods: {
                //createPost: function (){ 
                //Check that the title field is not empty },

                // deletePost: function(item){
                //     this.list.splice(
                //         this.list.indexOf(item), 1
                //     );
                //     localStorage.setItem("posts", JSON.stringify(this.list));
                // }, 
                // editPost: function(item){ 
                //    //Edit all values in the post.
                //     this.editing = true;
                //     //Obtains the values to be edited.
                //     this.form.title = item.title;
                //     this.form.resum = item.resum;
                //     this.form.autor = item.autor;
                //     this.form.fecha = item.fecha;
                //     this.form.img = item.img;
                //     this.editIndex =  this.list.indexOf(item);
                // },
                // saveimg: function(event){
                //     //Stores the name of the image.
                //     this.form.img = event.target.files[0].name;
                // },
                // publishedPost: function(item) {
                //     this.list.splice(
                //         this.list.indexOf(item), 1, {
                //             title: item.title,
                //             resum: item.resum,
                //             autor: item.autor,
                //             img: item.img,
                //             fecha: item.fecha,
                //             publication_status: "publicado",
                //         }
                //     );
                //     localStorage.setItem("posts", JSON.stringify(this.list));
                // }
            }, mounted(item){
                //Displays the content stored in localStorage.
                // let objeto = JSON.parse(localStorage.getItem("posts"));
                // // console.log(objeto);
                // this.list = objeto;
                this.$router.push("/");
            },
        });
        app.use(router)
        app.mount("#app");
    </script>
    <!--Este script hace que funcione la pestaÃ±a despegable de living-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>